#!/bin/zsh

# copy-pwd - Copy current working directory to clipboard
# Author: Yuwei Liang

# Colors for output
GREEN='\033[0;32m'
BLUE='\033[0;34m'
RED='\033[0;31m'
NC='\033[0m' # No Color

# Get current working directory
CURRENT_DIR=$(pwd)

# Function to copy to clipboard based on OS
copy_to_clipboard() {
    local text="$1"
    
    # macOS
    if [[ "$OSTYPE" == "darwin"* ]]; then
        if command -v pbcopy &> /dev/null; then
            echo -n "$text" | pbcopy
            return 0
        fi
    # Linux
    elif [[ "$OSTYPE" == "linux-gnu"* ]]; then
        if command -v xclip &> /dev/null; then
            echo -n "$text" | xclip -selection clipboard
            return 0
        elif command -v xsel &> /dev/null; then
            echo -n "$text" | xsel --clipboard --input
            return 0
        fi
    fi
    
    return 1
}

# Main execution
if copy_to_clipboard "$CURRENT_DIR"; then
    echo -e "${GREEN}âœ“ Current directory copied to clipboard:${NC}"
    echo -e "${BLUE}$CURRENT_DIR${NC}"
else
    echo -e "${RED}Error: Could not copy to clipboard${NC}"
    echo "Current directory: $CURRENT_DIR"
    echo ""
    echo "Please install one of the following clipboard tools:"
    echo "  macOS: pbcopy (usually pre-installed)"
    echo "  Linux: xclip (apt install xclip) or xsel (apt install xsel)"
    exit 1
fi 